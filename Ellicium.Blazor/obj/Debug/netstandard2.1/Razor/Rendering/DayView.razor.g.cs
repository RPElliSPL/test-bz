#pragma checksum "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor" "{8829d00f-11b8-4213-878b-770e8597ac16}" "20b9109ca6982e10a34ac7abb2815c9615a25eb48e238ba37cda229b29a70278"
// <auto-generated/>
#pragma warning disable 1591
namespace Ellicium.Blazor.Rendering
{
    #line hidden
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
using Ellicium.Blazor;

#line default
#line hidden
#nullable disable
    public partial class DayView : DropableViewBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "rz-view rz-day-view");
            __builder.AddMarkupContent(2, "\n    ");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "rz-view-header");
            __builder.AddMarkupContent(5, "\n        <div class=\"rz-slot-hour-header\"></div>\n        ");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "rz-slot-header");
            __builder.AddMarkupContent(8, "\n            ");
#nullable restore
#line (8,14)-(8,58) 24 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
__builder.AddContent(9, StartDate.ToString("ddd", Scheduler.Culture));

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(10, "\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(12, "\n    ");
            __builder.OpenElement(13, "div");
            __builder.AddAttribute(14, "class", "rz-view-content");
            __builder.AddAttribute(15, "tabindex", "0");
            __builder.AddAttribute(16, "onkeydown", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.KeyboardEventArgs>(this, 
#nullable restore
#line 11 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                      args => OnKeyPress(args)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddEventPreventDefaultAttribute(17, "onkeydown", 
#nullable restore
#line 11 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                                             preventKeyPress

#line default
#line hidden
#nullable disable
            );
            __builder.AddEventStopPropagationAttribute(18, "onkeydown", true);
            __builder.AddAttribute(19, "onfocus", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.FocusEventArgs>(this, 
#nullable restore
#line 12 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                    args => {if(CurrentDate == default(DateTime)) { CurrentDate = StartDate; }}

#line default
#line hidden
#nullable disable
            ));
            __builder.AddElementReferenceCapture(20, (__value) => {
#nullable restore
#line 11 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
              view = __value;

#line default
#line hidden
#nullable disable
            }
            );
            __builder.AddMarkupContent(21, "\n        ");
            __builder.OpenComponent<global::Ellicium.Blazor.Rendering.Hours>(22);
            __builder.AddAttribute(23, "Start", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.TimeSpan>(
#nullable restore
#line 13 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                      StartTime

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(24, "End", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.TimeSpan>(
#nullable restore
#line 13 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                     EndTime

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(25, "TimeFormat", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.String>(
#nullable restore
#line 13 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                         TimeFormat

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(26, "MinutesPerSlot", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 13 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                    MinutesPerSlot

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.AddMarkupContent(27, "\n        ");
            __builder.OpenElement(28, "div");
            __builder.AddAttribute(29, "class", "rz-slots");
            __builder.AddMarkupContent(30, "\n            ");
            __builder.OpenComponent<global::Ellicium.Blazor.Rendering.DaySlotEvents>(31);
            __builder.AddAttribute(32, "MinutesPerSlot", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                           MinutesPerSlot

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(33, "StartDate", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.DateTime>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                     StartDate

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(34, "EndDate", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.DateTime>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                        EndDate

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(35, "Appointments", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IList<Ellicium.Blazor.AppointmentData>>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                              Appointments

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(36, "CurrentDate", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.DateTime>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                                                         CurrentDate

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(37, "CurrentAppointment", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Int32>(
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                                                                                           currentAppointment

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(38, "AppointmentDragStart", (object)(global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Ellicium.Blazor.AppointmentData>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Ellicium.Blazor.AppointmentData>(this, 
#nullable restore
#line 15 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                                                                                                                                     OnAppointmentDragStart

#line default
#line hidden
#nullable disable
            ))));
            __builder.CloseComponent();
            __builder.AddMarkupContent(39, "\n");
#nullable restore
#line 16 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
             for (var date = StartDate; date < EndDate; date = date.AddMinutes(MinutesPerSlot))
            {
                var slotDate = date;

#line default
#line hidden
#nullable disable
            __builder.AddContent(40, "                    ");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 19 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                    args => OnSlotClick(slotDate)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMultipleAttributes(43, global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IEnumerable<global::System.Collections.Generic.KeyValuePair<string, object>>>(
#nullable restore
#line 19 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                Attributes(date)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(44, "ondragover", "event.preventDefault();");
            __builder.AddAttribute(45, "ondrop", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.DragEventArgs>(this, 
#nullable restore
#line 19 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
                                                                                                                                                args => @OnDrop(slotDate)

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\n");
#nullable restore
#line 20 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(47, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(48, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 25 "C:\Users\Rishabh_Patil\source\repos\Blazor\Ellicium Packages\ellicium-blazor-master\ellicium-blazor-master\Ellicium.Blazor\Rendering\DayView.razor"
       
    ElementReference view;

    [Parameter]
    public DateTime StartDate { get; set; }

    [Parameter]
    public TimeSpan StartTime { get; set; }

    [Parameter]
    public DateTime EndDate { get; set; }

    [Parameter]
    public TimeSpan EndTime { get; set; }

    [Parameter]
    public string TimeFormat { get; set; }

    [Parameter]
    public int MinutesPerSlot { get; set; }

    [Parameter]
    public IList<AppointmentData> Appointments { get; set; }

    [CascadingParameter]
    public IScheduler Scheduler { get; set; }

    private AppointmentData[] AppointmentsInSlot(DateTime start, DateTime end)
    {
        if (Appointments == null)
        {
            return Array.Empty<AppointmentData>();
        }

        return Appointments.Where(item => Scheduler.IsAppointmentInRange(item, start, end)).OrderBy(item => item.Start).ThenByDescending(item => item.End).ToArray();
    }

    async Task OnSlotClick(DateTime date)
    {
        await Scheduler.SelectSlot(date, date.AddMinutes(MinutesPerSlot), AppointmentsInSlot(date, date.AddMinutes(MinutesPerSlot)));
    }

    IDictionary<string, object> Attributes(DateTime date)
    {
        var attributes = Scheduler.GetSlotAttributes(date, date.AddMinutes(MinutesPerSlot));
        attributes["class"] = ClassList.Create("rz-slot").Add("rz-slot-minor", (date.Minute / MinutesPerSlot) % 2 == 1).Add(attributes).ToString();
        attributes["dropzone"] = "move";
        return attributes;
    }

    DateTime CurrentDate;
    int currentAppointment = -1;
    IEnumerable<AppointmentData> currentAppointments = Enumerable.Empty<AppointmentData>();
    bool preventKeyPress = false;

    async Task OnKeyPress(KeyboardEventArgs args)
    {
        var key = args.Code != null ? args.Code : args.Key;
        var arrow = key == "ArrowLeft" || key == "ArrowRight" || key == "ArrowUp" || key == "ArrowDown";
        var updown = key == "ArrowUp" || key == "ArrowDown";
        var leftright = key == "ArrowLeft" || key == "ArrowRight";

        currentAppointments = AppointmentsInSlot(CurrentDate, CurrentDate.AddDays(1));

        if (arrow && currentAppointments.Any())
        {
            if (updown || leftright)
            {
                currentAppointment = Math.Clamp(currentAppointment + (key == "ArrowUp" || key == "ArrowLeft" ? -1 : 1), 0, currentAppointments.Count() - 1);
            }

            preventKeyPress = true;
        }
        else if (key == "Enter")
        {
            await OnSlotClick(CurrentDate);
#if NET5_0_OR_GREATER
            await view.FocusAsync();
#endif

            preventKeyPress = true;
        }
        else if (key == "Space")
        {
            if (currentAppointments.Any())
            {
                await Scheduler.SelectAppointment(currentAppointments.ElementAt(currentAppointment));
#if NET5_0_OR_GREATER
                await view.FocusAsync();
#endif
            }

            preventKeyPress = true;
        }
        else
        {
            preventKeyPress = false;
        }
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
